{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport { BarCodeScanner } from \"expo-barcode-scanner\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar QRCodeScannerScreen = function QRCodeScannerScreen(_ref) {\n  var navigation = _ref.navigation;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    hasPermission = _useState2[0],\n    setHasPermission = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    scanned = _useState4[0],\n    setScanned = _useState4[1];\n  useEffect(function () {\n    _asyncToGenerator(function* () {\n      var _yield$BarCodeScanner = yield BarCodeScanner.requestPermissionsAsync(),\n        status = _yield$BarCodeScanner.status;\n      setHasPermission(status === \"granted\");\n    })();\n  }, []);\n  var handleBarCodeScanned = function handleBarCodeScanned(_ref3) {\n    var data = _ref3.data;\n    setScanned(true);\n    console.log(`Bar code scanned: ${data}`);\n    var _data$split = data.split(\", \"),\n      _data$split2 = _slicedToArray(_data$split, 3),\n      name = _data$split2[0],\n      email = _data$split2[1],\n      phone = _data$split2[2];\n    navigation.navigate(\"UserInfo\", {\n      name: name,\n      email: email,\n      phone: phone\n    });\n  };\n  if (hasPermission === null) {\n    return _jsx(Text, {\n      children: \"\\u0110\\u1EE3i xin quy\\u1EC1n truy c\\u1EADp m\\xE1y \\u1EA3nh...\"\n    });\n  }\n  if (hasPermission === false) {\n    return _jsx(Text, {\n      children: \"Kh\\xF4ng c\\xF3 quy\\u1EC1n truy c\\u1EADp m\\xE1y \\u1EA3nh.\"\n    });\n  }\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(BarCodeScanner, {\n      onBarCodeScanned: scanned ? undefined : handleBarCodeScanned,\n      style: StyleSheet.absoluteFillObject\n    }), scanned && _jsx(Button, {\n      title: \"Qu\\xE9t l\\u1EA1i\",\n      onPress: function onPress() {\n        return setScanned(false);\n      }\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    flexDirection: \"column\",\n    justifyContent: \"flex-end\"\n  }\n});\nexport default QRCodeScannerScreen;","map":{"version":3,"names":["React","useState","useEffect","View","Text","StyleSheet","Button","BarCodeScanner","jsx","_jsx","jsxs","_jsxs","QRCodeScannerScreen","_ref","navigation","_useState","_useState2","_slicedToArray","hasPermission","setHasPermission","_useState3","_useState4","scanned","setScanned","_asyncToGenerator","_yield$BarCodeScanner","requestPermissionsAsync","status","handleBarCodeScanned","_ref3","data","console","log","_data$split","split","_data$split2","name","email","phone","navigate","children","style","styles","container","onBarCodeScanned","undefined","absoluteFillObject","title","onPress","create","flex","flexDirection","justifyContent"],"sources":["C:/Users/Nguyen Thien Tam/OneDrive/Desktop/MOBILEAPP/QR/components/QRCodeScannerScreen.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { View, Text, StyleSheet, Button } from \"react-native\";\r\nimport { BarCodeScanner } from \"expo-barcode-scanner\";\r\n\r\nconst QRCodeScannerScreen = ({ navigation }) => {\r\n  const [hasPermission, setHasPermission] = useState(null);\r\n  const [scanned, setScanned] = useState(false);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      const { status } = await BarCodeScanner.requestPermissionsAsync();\r\n      setHasPermission(status === \"granted\");\r\n    })();\r\n  }, []);\r\n  const handleBarCodeScanned = ({ data }) => {\r\n    setScanned(true);\r\n    // Xử lý dữ liệu mã QR ở đây (data chứa nội dung mã QR)\r\n    console.log(`Bar code scanned: ${data}`);\r\n    const [name, email, phone] = data.split(\", \");\r\n\r\n    // Điều hướng đến màn hình hiển thị thông tin và nút kết bạn\r\n    navigation.navigate(\"UserInfo\", { name, email, phone });\r\n    // Điều hướng đến màn hình hiển thị thông tin và nút kết bạn\r\n    //navigation.navigate(\"UserInfo\", { data });\r\n  };\r\n\r\n  if (hasPermission === null) {\r\n    return <Text>Đợi xin quyền truy cập máy ảnh...</Text>;\r\n  }\r\n  if (hasPermission === false) {\r\n    return <Text>Không có quyền truy cập máy ảnh.</Text>;\r\n  }\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <BarCodeScanner\r\n        onBarCodeScanned={scanned ? undefined : handleBarCodeScanned}\r\n        style={StyleSheet.absoluteFillObject}\r\n      />\r\n      {scanned && <Button title=\"Quét lại\" onPress={() => setScanned(false)} />}\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    flexDirection: \"column\",\r\n    justifyContent: \"flex-end\",\r\n  },\r\n});\r\n\r\nexport default QRCodeScannerScreen;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAAC,OAAAC,IAAA;AAAA,OAAAC,IAAA;AAAA,OAAAC,UAAA;AAAA,OAAAC,MAAA;AAEnD,SAASC,cAAc,QAAQ,sBAAsB;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAEtD,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAAC,IAAA,EAAuB;EAAA,IAAjBC,UAAU,GAAAD,IAAA,CAAVC,UAAU;EACvC,IAAAC,SAAA,GAA0Cd,QAAQ,CAAC,IAAI,CAAC;IAAAe,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAjDG,aAAa,GAAAF,UAAA;IAAEG,gBAAgB,GAAAH,UAAA;EACtC,IAAAI,UAAA,GAA8BnB,QAAQ,CAAC,KAAK,CAAC;IAAAoB,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAAtCE,OAAO,GAAAD,UAAA;IAAEE,UAAU,GAAAF,UAAA;EAE1BnB,SAAS,CAAC,YAAM;IACdsB,iBAAA,CAAC,aAAY;MACX,IAAAC,qBAAA,SAAyBlB,cAAc,CAACmB,uBAAuB,CAAC,CAAC;QAAzDC,MAAM,GAAAF,qBAAA,CAANE,MAAM;MACdR,gBAAgB,CAACQ,MAAM,KAAK,SAAS,CAAC;IACxC,CAAC,EAAE,CAAC;EACN,CAAC,EAAE,EAAE,CAAC;EACN,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAoBA,CAAAC,KAAA,EAAiB;IAAA,IAAXC,IAAI,GAAAD,KAAA,CAAJC,IAAI;IAClCP,UAAU,CAAC,IAAI,CAAC;IAEhBQ,OAAO,CAACC,GAAG,CAAE,qBAAoBF,IAAK,EAAC,CAAC;IACxC,IAAAG,WAAA,GAA6BH,IAAI,CAACI,KAAK,CAAC,IAAI,CAAC;MAAAC,YAAA,GAAAlB,cAAA,CAAAgB,WAAA;MAAtCG,IAAI,GAAAD,YAAA;MAAEE,KAAK,GAAAF,YAAA;MAAEG,KAAK,GAAAH,YAAA;IAGzBrB,UAAU,CAACyB,QAAQ,CAAC,UAAU,EAAE;MAAEH,IAAI,EAAJA,IAAI;MAAEC,KAAK,EAALA,KAAK;MAAEC,KAAK,EAALA;IAAM,CAAC,CAAC;EAGzD,CAAC;EAED,IAAIpB,aAAa,KAAK,IAAI,EAAE;IAC1B,OAAOT,IAAA,CAACL,IAAI;MAAAoC,QAAA,EAAC;IAAiC,CAAM,CAAC;EACvD;EACA,IAAItB,aAAa,KAAK,KAAK,EAAE;IAC3B,OAAOT,IAAA,CAACL,IAAI;MAAAoC,QAAA,EAAC;IAAgC,CAAM,CAAC;EACtD;EAEA,OACE7B,KAAA,CAACR,IAAI;IAACsC,KAAK,EAAEC,MAAM,CAACC,SAAU;IAAAH,QAAA,GAC5B/B,IAAA,CAACF,cAAc;MACbqC,gBAAgB,EAAEtB,OAAO,GAAGuB,SAAS,GAAGjB,oBAAqB;MAC7Da,KAAK,EAAEpC,UAAU,CAACyC;IAAmB,CACtC,CAAC,EACDxB,OAAO,IAAIb,IAAA,CAACH,MAAM;MAACyC,KAAK,EAAC,kBAAU;MAACC,OAAO,EAAE,SAAAA,QAAA;QAAA,OAAMzB,UAAU,CAAC,KAAK,CAAC;MAAA;IAAC,CAAE,CAAC;EAAA,CACrE,CAAC;AAEX,CAAC;AAED,IAAMmB,MAAM,GAAGrC,UAAU,CAAC4C,MAAM,CAAC;EAC/BN,SAAS,EAAE;IACTO,IAAI,EAAE,CAAC;IACPC,aAAa,EAAE,QAAQ;IACvBC,cAAc,EAAE;EAClB;AACF,CAAC,CAAC;AAEF,eAAexC,mBAAmB"},"metadata":{},"sourceType":"module","externalDependencies":[]}